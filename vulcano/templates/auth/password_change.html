{% extends 'base.html' %}
{% load static %}

{% block title %}Cambiar Contraseña - Vulcano{% endblock %}

{% block content %}
<div class="dashboard-wrapper">
    
    <!-- Sidebar -->
    {% include 'dashboard/partials/_sidebar.html' %}
    
    <!-- Main Content -->
    <div class="dashboard-main">
        
        <!-- Toggle Sidebar (móvil) -->
        <button class="sidebar-toggle">
            <i class="bi bi-list"></i>
        </button>
        
        <!-- Header -->
        <div class="dashboard-header">
            <h1 class="dashboard-title">
                <i class="bi bi-key"></i> Cambiar Contraseña
            </h1>
            <p class="dashboard-subtitle">
                Actualiza tu contraseña para mantener tu cuenta segura
            </p>
        </div>
        
        <!-- Password Change Form -->
        <div class="row justify-content-center">
            <div class="col-lg-6">
                <div class="dashboard-section">
                    <form method="post" class="form-vulcano">
                        {% csrf_token %}
                        
                        {% if form.non_field_errors %}
                        <div class="alert alert-danger">
                            {{ form.non_field_errors }}
                        </div>
                        {% endif %}
                        
                        <!-- Current Password -->
                        <div class="form-group">
                            <label for="{{ form.old_password.id_for_label }}" class="form-label">
                                Contraseña Actual
                            </label>
                            {{ form.old_password }}
                            {% if form.old_password.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.old_password.errors }}
                            </div>
                            {% endif %}
                        </div>
                        
                        <!-- New Password -->
                        <div class="form-group">
                            <label for="{{ form.new_password1.id_for_label }}" class="form-label">
                                Nueva Contraseña
                            </label>
                            {{ form.new_password1 }}
                            {% if form.new_password1.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.new_password1.errors }}
                            </div>
                            {% endif %}
                            {% if form.new_password1.help_text %}
                            <div class="form-text">
                                {{ form.new_password1.help_text }}
                            </div>
                            {% endif %}
                        </div>
                        
                        <!-- Confirm New Password -->
                        <div class="form-group">
                            <label for="{{ form.new_password2.id_for_label }}" class="form-label">
                                Confirmar Nueva Contraseña
                            </label>
                            {{ form.new_password2 }}
                            {% if form.new_password2.errors %}
                            <div class="invalid-feedback d-block">
                                {{ form.new_password2.errors }}
                            </div>
                            {% endif %}
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="form-actions">
                            <button type="submit" class="btn btn-vulcano btn-block">
                                <i class="bi bi-check-circle"></i> Cambiar Contraseña
                            </button>
                            <a href="{% url 'vulcano:profile' %}" class="btn btn-outline-vulcano btn-block mt-2">
                                <i class="bi bi-arrow-left"></i> Volver al Perfil
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}